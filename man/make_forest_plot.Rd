% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/make_forest_plot.R
\name{make_forest_plot}
\alias{make_forest_plot}
\title{Create a Forest Plot of Association Results}
\usage{
make_forest_plot(
  results_df,
  clinical_manifestation,
  predictor_var_colname,
  adjust_vars,
  clinical_manifestation_colname = "clinical_manifestation",
  ntop = NULL,
  adjust_p = adjust_p,
  p_adj_method = p_adj_method,
  pt.size = pt.size,
  y.axis.text.size,
  x.axis.text.size,
  or.label.size,
  plot_title = "",
  name_mapping = NULL,
  add_xylabs = FALSE,
  filter_sig_OR = TRUE
)
}
\arguments{
\item{clinical_manifestation}{Character vector of clinical manifestation names to include in the plot.}

\item{predictor_var_colname}{Character string specifying the column name for the predictor variable.}

\item{adjust_vars}{Character vector or string of adjustment variables used in the model
(e.g., \code{"Age_dx + sex"}). Used to remove adjusted terms from the plotted results.}

\item{clinical_manifestation_colname}{Character string indicating the column name in
\code{results_df} corresponding to the clinical manifestation variable (default: \code{"clinical_manifestation"}).}

\item{ntop}{Integer specifying the number of top associations (by OR) to include in the plot (default: \code{NULL}, plots all).}

\item{adjust_p}{Logical indicating whether adjusted p-values (\code{adj_p}) should be used
for coloring points (default: inherits from calling environment).}

\item{p_adj_method}{Character string specifying the p-value adjustment method (default: inherits from calling environment).}

\item{pt.size}{Numeric value controlling point size in the forest plot.}

\item{y.axis.text.size}{Numeric value specifying text size for the y-axis labels.}

\item{x.axis.text.size}{Numeric value specifying text size for the x-axis labels.}

\item{or.label.size}{Numeric value controlling the size of the odds ratio text labels.}

\item{plot_title}{Character string specifying the plot title (default: \code{""}).}

\item{name_mapping}{Optional named vector or list mapping variable names to human-readable labels.}

\item{add_xylabs}{Logical; if \code{TRUE}, adds axis labels and title to the plot (default: \code{FALSE}).}

\item{filter_sig_OR}{Logical; if \code{TRUE}, filters results to include only significant ORs
(i.e., 95\\% CI does not cross 1) (default: \code{TRUE}).}
}
\value{
A \code{ggplot2} object representing the forest plot, ready for further customization or saving.
}
\description{
This function generates a publication-ready forest plot summarizing the odds ratios (ORs),
95\% confidence intervals, and p-values (or adjusted p-values) from association analyses,
such as those produced by \code{run_associations()}. It filters, ranks, and visualizes
the most significant associations across clinical manifestations and predictor variables.
}
\details{
The function removes intercepts and adjustment variables from the results before plotting.
If \code{filter_sig_OR = TRUE}, only terms with 95\% confidence intervals entirely above or below 1
are included. Associations are colored by their p-value or adjusted p-value, depending on user settings.
The x-axis represents the odds ratio (OR) with 95\% confidence intervals, and the y-axis shows the
clinical manifestation and predictor variable combinations.

When \code{name_mapping} is provided, both the clinical manifestation and predictor names are
replaced by human-readable labels. This is particularly useful for figure preparation in publications.
}
\examples{
\dontrun{
forest <- make_forest_plot(
  results_df = association_results,
  clinical_manifestation = c("arthritis", "nephritis"),
  predictor_var_colname = "cluster",
  adjust_vars = "Age_dx + sex",
  ntop = 10,
  adjust_p = TRUE,
  pt.size = 2,
  y.axis.text.size = 10,
  x.axis.text.size = 8,
  or.label.size = 3,
  plot_title = "Top 10 Cluster Associations",
  add_xylabs = TRUE
)
print(forest)
}

}
\seealso{
\code{\link[=run_associations]{run_associations()}}, \code{\link[ggplot2:ggplot]{ggplot2::ggplot()}}
}
